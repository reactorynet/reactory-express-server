type SurveyCalendarEntry {
  entryType: String
  title: String
  start: Date!
  end: Date,
  hasTask: Boolean,
  taskResult: String
  taskError: String
}

type TimelineEntry {
  when: Date!
  eventType: String
  eventDetail: String
  who: User  
}

type DelegateEntry {
  delegate: User
  notifications: [Notification]
  assessments: [Assessment]
  launched: Boolean
  complete: Boolean 
  removed: Boolean 
}

type Survey {
  id: ObjID!
  leadershipBrand: LeadershipBrand
  organization: Organization
  title: String!
  surveyType: String!
  startDate: Date
  endDate: Date
  mode: String
  status: String
  delegates: [DelegateEntry]  
  calendar: [SurveyCalendarEntry]
  timeline: [TimelineEntry]
}

type UserDashboard {
  dashboardData: Any
}

input SurveyInput {
  id: String
  leadershipBrand: String!
  organization: String!
  title: String!
  surveyType: String!
  startDate: Date
  endDate: Date
  mode: String
  status: String  
}

input SurveyLaunchOptions {
  live: Boolean
  sendEmails: Boolean
  minimumPeers: Int
  maximumPeers: Int
  requiresSupervisor: Boolean
  requiresDirectReport: Boolean
}

input ReminderOptions {
  when: Date
  urgent: Boolean
}

type DelegateAddResponse {
  response: UpdateResponse
  user: User
}

type DelegateRemoveResponse {
  response: UpdateResponse
  user: User
}

extend type Query {
  surveysForOrganization(organizationId: String!): [Survey]
  surveysList: [Survey]
  surveyDetail(surveyId: String!): Survey
}

extend type Mutation {
  createSurvey(id: String!, surveyData: SurveyInput): Survey
  updateSurvey(id: String!, surveyData: SurveyInput!): UpdateResponse
  launchSurvey(id: String!, options: SurveyLaunchOptions): UpdateResponse
  addDelegateToSurvey(surveyId: String!, delegateId: String!): DelegateAddResponse
  removeDelegateFromSurvey(surveyId: String!, delegateId: String!): DelegateRemoveResponse
  postRemidners(id: String, options: ReminderOptions): UpdateResponse
}