module.exports = {
  apps: [{
    name: 'ReactoryApi',
    script: 'server.js',
    kill_timeout: 3000,
    listen_timeout: 10000,
    max_memory_restart: '2G',
    interpreter: 'babel-node',
    node_args: '--preset=es2016,stage-2',
    watch: true,
    env: {
      NODE_ENV: 'development',
      APP_DATA_ROOT: '/mnt/d/data/reactory',
      LEGACY_APP_DATA_ROOT: '/mnt/d/data',
      MONGOOSE: 'mongodb://localhost:27017/reactory',
      WORKFLOW_MONGO: 'mongodb://localhost:27017/reactory-workflow',
      API_PORT: 4000,
      SENDGRID_API_KEY: process.env.SENDGRID_API_KEY,
      API_URI_ROOT: 'http://locahost:4000/',
      CDN_ROOT: 'http://localhost:4000/cdn/',
      MODE: 'DEVELOP',
      LOG_LEVEL: 'debug',
      OAUTH_APP_ID: 'your app id goes here',
      OAUTH_APP_PASSWORD: 'your app pass goes here',
      OAUTH_REDIRECT_URI: 'http://localhost:4000/auth/microsoft/openid/complete',
      OAUTH_SCOPES: 'profile offline_access user.read calendars.read mail.read email',
      OAUTH_AUTHORITY: 'https://login.microsoftonline.com/common',
      OAUTH_ID_METADATA: '/v2.0/.well-known/openid-configuration',
      OAUTH_AUTHORIZE_ENDPOINT: '/oauth2/v2.0/authorize',
      OAUTH_TOKEN_ENDPOINT: '/oauth2/v2.0/token',
    },
    env_production: {
      NODE_ENV: 'production',
      APP_DATA_ROOT: '/data/reactory',
      LEGACY_APP_DATA_ROOT: '/data/legacy',
      MONGOOSE: 'mongodb://localhost:27017/reactory',
      WORKFLOW_MONGO: 'mongodb://localhost:27017/reactory-workflow',
      API_PORT: 4000,
      SENDGRID_API_KEY: process.env.SENDGRID_API_KEY,
      API_URI_ROOT: 'https://api.reactory.net/',
      CDN_ROOT: 'https://api.reactory.net/cdn/',
      MODE: 'PRODUCTION',
      LOG_LEVEL: 'info',
      OAUTH_APP_ID: 'your app id goes here',
      OAUTH_APP_PASSWORD: 'your app pass goes here',
      OAUTH_REDIRECT_URI: 'https://api.reactory.net/auth/microsoft/openid/complete',
      OAUTH_SCOPES: 'profile offline_access user.read calendars.read mail.read email',
      OAUTH_AUTHORITY: 'https://login.microsoftonline.com/common',
      OAUTH_ID_METADATA: '/v2.0/.well-known/openid-configuration',
      OAUTH_AUTHORIZE_ENDPOINT: '/oauth2/v2.0/authorize',
      OAUTH_TOKEN_ENDPOINT: '/oauth2/v2.0/token',
    },
    env_staging: {
      NODE_ENV: 'staging',
      APP_DATA_ROOT: '/data/reactory',
      LEGACY_APP_DATA_ROOT: '/data/legacy',
      MONGOOSE: 'mongodb://localhost:27017/reactory',
      WORKFLOW_MONGO: 'mongodb://localhost:27017/reactory-workflow',
      API_PORT: 4000,
      SENDGRID_API_KEY: process.env.SENDGRID_API_KEY,
      API_URI_ROOT: 'https://qa-api.reactory.net/',
      CDN_ROOT: 'https://qa-api.reactory.net/cdn/',
      MODE: 'PRODUCTION',
      LOG_LEVEL: 'info',
      OAUTH_APP_ID: 'your app id goes here',
      OAUTH_APP_PASSWORD: 'your app pass goes here',
      OAUTH_REDIRECT_URI: 'https://qa-api.reactory.net/auth/microsoft/openid/complete',
      OAUTH_SCOPES: 'profile offline_access user.read calendars.read mail.read email',
      OAUTH_AUTHORITY: 'https://login.microsoftonline.com/common',
      OAUTH_ID_METADATA: '/v2.0/.well-known/openid-configuration',
      OAUTH_AUTHORIZE_ENDPOINT: '/oauth2/v2.0/authorize',
      OAUTH_TOKEN_ENDPOINT: '/oauth2/v2.0/token',
    },
  }],
  deploy: {
    production: {
      user: 'root',
      host: ['api.reactory.net'],
      ref: 'origin/develop',
      repo: 'git@bitbucket.org:WernerWeber/assessor-api.git',
      path: '/var/reactory/api',
      ssh_options: ['IdentityFile=~/.ssh/reactory_bitbucket_key', 'StrictHostKeyChecking=no'],
      'post-deploy': 'pm2 start config/run/reactory.config.js',
      env: {
        NODE_ENV: 'production',
      },
    },
  },
};
