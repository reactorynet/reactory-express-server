type LasecCompany {
  id: String
  tradingName: String
}

type LasecCustomer {
  id: String
  fullName: String
}

type LasecCurrency {
  id: String
  code: String
  name: String
  symbol: String
  spot_rate: Float
  web_rate: Float
}

type LasecQuoteItem {
  id: ObjID
  quote_item_id: String
  product_id: String
  code: String
  title: String
  productClass: String
  productClassDescription: String
  quantity: Float
  price: Float
  unit_price: Float
  discount: Float
  subtotal: Float
  totalVATExclusive: Float
  totalVATInclusive: Float
  product: Product
  VATRate: Float
  GP: Float
  header: LasecQuoteHeader
  note: String
  quote_option_id: String
  content: Any
  meta: Any
  position: Int
}

input LasecQuoteItemInput {
  id: ObjID
  quote_item_id: String
  code: String
  title: String
  quantity: Float
  price: Float
  unit_price_cents: Int
  position: Int
  discount: Float
  subtotal: Float
  totalVATExclusive: Float
  totalVATInclusive: Float
  VATRate: Float
  GP: Float
  header_id: String
  note: String
  quote_heading_id: String
  quote_option_id: String
  included_in_quote_option: Boolean
  markup: Float
  agent_commission: Float
  comment: String
  ignore_duplicates: Boolean
}

# input LasecQuoteItemInput {
#   id: ObjID
#   price: Float
#   discount: Float
#   subtotal: Float
#   totalVATExclusive: Float
#   totalVATInclusive: Float
#   VATRate: Float
#   GP: Float
#   MUP: Float
#   note: String
#   content: Any
# }

type LasecQuoteHeader {
  id: String
  headerId: String
  text: String
  heading: String
  quote_item_id: Int
  quote_id: String
  quoteItems: [LasecQuoteItem]
}

type QuoteReminder {
  id: ObjID
  quote: Quote
  who: [User]
  next: Date
  actionType: String
  actioned: Boolean
  result: Any
  via: [String]
  text: String
  importance: String
  meta: Any
}

type QuoteTimeLine {
  id: ObjID
  what: String
  when: Date
  actionType: String
  who: User
  notes: String
  reminder: QuoteReminder
}

type QuoteTotals {
  totalVATExclusive: Float
  totalVAT: Float
  totalVATInclusive: Float
  totalDiscount: Float
  totalDiscountPercent: Float
  GP: Float
  actualGP: Float
}

type LasecQuoteOption {
  id: String
  quote_option_id: String
  quote_id: String
  option_name: String
  name: String
  inco_terms: String
  named_place: String
  transport_mode: String
  currency: String
  active: Boolean
  special_comment: String
  number_of_items: Int
  discount: Int
  discount_percent: Float
  total_ex_vat: Int
  total_incl_vat: Int
  vat: Int
  gp: Int
  lineItems: [LasecQuoteItem]
}

input LasecQuoteOptionPatchInput {
  id: String
  option_name: String
  inco_terms: String
  named_place: String
  transport_mode: String
  currency: String
  active: Boolean
  quote_option_id: String
  quote_id: String
}

type Incoterm {
  key: String
  title: String
}

"""
Quote Type, root type for the lasec quote graph
The resolvers for this graph node will fetch and shape the specfic elements
for each quote from the LASEC API.

Elements that have a slow rate of change will be cached and items
with a high rate of change will be fetched in real time via the API.
"""
type Quote {
  """
  Mongo Id that is system generated
  """
  id: String
  """
  The quote id that is used for the reference
  """
  quote_id: String
  """
  The quote id that is used for the reference - alias for quote_id
  """
  code: String
  """
  The status group for the quote (key), this will be 1-1, 1-4 etc.
  """
  statusGroup: String
  """
  The visual display name for status group
  """
  statusGroupName: String

  status: String
  statusName: String
  salesRep: User
  salesTeam: Team
  allowedStatus: [String]

  lasec_client: LasecCRMClient
  lasec_customer: LasecCRMCustomer

  # These aliases need to be removed, use client, for user and customer for organisation
  """
  Represents the REACTORY user associated with the customer entity.
  This will be renamed to lasec_client in future to be in line with Lasec naming
  convetions
  """
  customer: User

  """
  Represents the REACTORY organisation associated with the company entity.
  This will be renamed to lasec_customer in future to be in line with Lasec naming
  convetions
  """
  company: Organization
  # These aliases need to be removed

  client: User

  totals: QuoteTotals
  totalVATExclusive: Float
  totalVAT: Float
  totalVATInclusive: Float

  GP: Float
  actualGP: Float
  created: Date
  modified: Date
  expirationDate: Date
  note: String
  active_option: String
  item_paging: PagingResult

  allowed_statuses: [String]
  options: [LasecQuoteOption]
  headers: [LasecQuoteHeader]
  lineItems: [LasecQuoteItem]
  currencies: [LasecCurrency]
  timeline: [QuoteTimeLine]
  incoterms: [Incoterm]
  lastAction: QuoteTimeLine
  meta: Any
  productClass: String
  repCode: String
  quoteType: String
  activeCurrency: LasecCurrency
  transportMode: String

  isInternational: Boolean
}

type LasecQuoteDashboardSummary {
  key: String
  title: String
  good: Int
  naughty: Int
  category: String
  quotes: [Quote]
}

enum LasecChartType {
  FUNNEL
  PIE
  AREA
  LINE
  RADAR
  RADIAL
  SCATTER
  TREEMAP
  COMPOSED
}

type LasecChart {
  chartType: LasecChartType
  data: Any
  options: Any
  key: String
}

type DateRange {
  startDate: Date
  endDate: Date
}

type LasecNextActionFilter {
  dateRange: DateRange
  actioned: Boolean
  actionType: String
}

type LasecUserNextActions {
  owner: User
  filter: LasecNextActionFilter
  actions: [QuoteReminder]
}

type LaseDashboardUserNextActions {
  owner: User
  filter: LasecNextActionFilter
  actions: [QuoteReminder]
}

type LasecQuoteDashboardCharts {
  quoteStatusFunnel: LasecChart
  quoteStatusPie: LasecChart
  quoteINVPie: LasecChart
  quoteISOPie: LasecChart
  quoteStatusComposed: LasecChart
}

type LasecProductDashboardCharts {
  quoteProductFunnel: LasecChart
  quoteProductPie: LasecChart
  quoteINVPie: LasecChart
  quoteISOPie: LasecChart
  quoteStatusComposed: LasecChart
}

type LasecQuoteDashboard {
  id: String
  period: String
  periodLabel: String
  periodStart: Date
  periodEnd: Date
  repIds: [String]
  agentSelection: String
  teamIds: [String]
  target: Float
  targetPercent: Float
  totalQuotes: Int
  totalInvoiced: Float
  totalBad: Int
  LasecGetDashboard: Float
  statusSummary: [LasecQuoteDashboardSummary]
  quotes: [Quote]
  nextActions: LasecUserNextActions
  charts: LasecQuoteDashboardCharts
}

type LasecProductDashboard {
  id: String
  period: String
  periodLabel: String
  periodStart: Date
  periodEnd: Date
  repIds: [String]
  agentSelection: String
  teamIds: [String]
  target: Float
  targetPercent: Float
  totalQuotes: Int
  totalBad: Int
  productSummary: [LasecQuoteDashboardSummary]
  quotes: [Quote]
  nextActions: LasecUserNextActions
  charts: LasecProductDashboardCharts
}

type LasecQuoteStatus {
  id: String
  status: String
  customer: LasecCustomer
  timeline: [QuoteTimeLine]
}

input LasecQuoteStatusUpdate {
  nextAction: String
  status: String
  reason: String
  reminder: Int
  note: String
}

type LasecQuoteStatusUpdateResult {
  quote: Quote
  success: Boolean
  message: String
}

input LasecQuoteQueryInput {
  period: String
  periodStart: Date
  periodEnd: Date
  agentSelection: String
  repIds: [String]
  teamIds: [String]
  status: [String]
  productClass: [String]
  options: Any
}

enum QuoteFilterType {
  Recent
  ByClient
  ByStatus
}

input LasecFilteredQuoteQueryInput {
  filterType: QuoteFilterType
}

enum QuoteHeaderAction {
  NEW
  ADD_ITEM
  REMOVE_ITEM
  REMOVE_HEADER
  UPDATE_TEXT
}

input LasecQuoteHeaderInput {
  quote_header_id: String
  quote_item_id: Int
  heading: String
  action: QuoteHeaderAction!
}

type LasecCustomerEnquiry {
  id: String
}

type OutlookSyncResponse {
  success: String
  message: String
}

type SimpleResponse {
  success: String
  message: String
}

type PagedCRMQuote {
  search: String
  filterBy: String
  paging: PagingResult
  quotes: [Quote]
}

type Invoice {
  id: String
  invoiceDate: String
  quoteDate: String
  quoteId: String
  customer: String
  client: String
  dispatches: String
  accountNumber: String
  salesTeamId: String
  poNumber: String
  value: Int
  isoNumber: String
}

type SalesHistory {
  id: String
  orderType: String
  quoteDate: String
  quoteNumber: String
  orderDate: String
  iso: String
  dispatches: String
  customer: String
  client: String
  poNumber: String
  value: Int
  salesTeamId: String
  accountNumber: String
  invoiceNumber: String

  quoteId: String
  salesOrderNumber: String
  orderStatus: String
  currency: String
  deliveryAddress: String
  warehouseNote: String
  deliveryNote: String
  salesTeam: String
}

type PagedCRMSalesOrders {
  paging: PagingResult
  salesOrders: [SalesOrder]
  totals: Any
  id: String
  image: String
  code: String
  description: String
  unitOfMeasure: String
  price: String
}

type PurchaseOrder {
  id: String
  dueDate: Date
  entryDate: Date
  lastUpdateDate: Date
  poNumber: String
  shipInfo: String
  orderQuantity: String
  receiptedQuantity: Int
}

type PagedCRMPurchaseOrders {
  paging: PagingResult
  purchaseOrders: [PurchaseOrder]
}

type PurchaseOrderItem {
  code: String
  description: String
  orderQty: String
  etaDate: Date
}

type PagedCRMInvoices {
  paging: PagingResult
  invoices: [Invoice]
}

type PagedCRMSalesHistory {
  paging: PagingResult
  year: Int
  month: Int
  years: [Any]
  salesHistory: [SalesHistory]
}

# CAN REMOVE THIS EVENTUALLY
type SalesHistoryMonthlyCount {
  month: Int
  year: Int
  total: Int
}

type SalesHistoryMonths {
  month: Int
  total: Int
}

type SalesHistoryYearlyCount {
  year: Int
  total: Int
  months: [SalesHistoryMonths]
}

type SalesOrderDocuments {
  id: String
  name: String
  url: String
}

type LasecQuoteComment {
  id: String
  who: User
  comment: String
  when: Date
}

type SalesOrderDocumentContent {
  id: ObjID
  slug: String!
  topics: [String]
  title: String!
  content: String!
  createdAt: Date
  updatedAt: Date
  createdBy: User!
  updatedBy: User!
  published: Boolean
  comments: [Comment]
}

input SalesOrderContentInput {
  slug: String!
  topics: [String]
  title: String!
  content: String!
  createdAt: Date
  updatedAt: Date
  createdBy: ObjID
  updatedBy: ObjID
  published: Boolean
}

type FreightRequestProductDetail {
  code: String
  description: String
  unitOfMeasure: String
  sellingPrice: Float
  qty: Int
  length: Float
  width: Float
  height: Float
  weight: Float
  volume: Float
}

type FreightRequestQuoteDetail {
  id: String
  email: String
  communicationMethod: String
  options: [FreightRequestOption]
}

type FreightRequestOption {
  name: String
  transportMode: String
  incoTerm: String
  place: String
  fromSA: Boolean
  vatExempt: Boolean
  totalValue: Int
  companyName: String
  streetAddress: String
  suburb: String
  city: String
  province: String
  country: String
  freightFor: String
  offloadRequired: Boolean
  hazardous: String
  refrigerationRequired: Boolean
  containsLithium: Boolean
  sample: String
  deliveryNote: String
  # additionalDetails: String
  productDetails: [FreightRequestProductDetail]
}

input FreightRequestOptionInput {
  name: String
  transportMode: String
  incoTerm: String
  namedPlace: String
  vatExempt: Boolean
  fromSA: Boolean
  totalValue: String
  companyName: String
  streetAddress: String
  suburb: String
  city: String
  province: String
  country: String
  freightFor: String
  offloadRequired: Boolean
  hazardous: String
  refrigerationRequired: Boolean
  containsLithium: Boolean
  sample: String
  additionalDetails: String
  productDetails: Any
}

input FreightRequestProductDetailInput {
  code: String
  description: String
  unitOfMeasure: String
  sellingPrice: Float
  qty: Int
  length: Float
  width: Float
  height: Float
  volume: Float
}

input FreightRequestDetailInput {
  quoteId: String
  email: String
  communicationMethod: String
  options: [FreightRequestOptionInput]
  productDetails: [FreightRequestProductDetailInput]
}

type QuoteClients {
  id: String
  clientStatus: String
  clientName: String
  customerName: String
  repCode: String
}

type PagedQuoteClients {
  search: String
  repCode: String
  paging: PagingResult
  clients: [QuoteClients]
}

input LasecNewQuoteInput {
  clientId: String
  repCode: String
}

type LasecNewQuoteResponse {
  success: Boolean
  message: String
  quoteId: String
  quoteOptionId: String
}

type QuoteDuplicateResponse {
  success: Boolean
  message: String
  quoteId: String
}

type LasecFreightRequestQuotePatchResponse {
  success: Boolean
  message: String
  freightRequest: FreightRequestQuoteDetail
}

type LasecPreparedEmail {
  id: String
  quote_id: String
  email_type: String
  from: FromEmailAddress
  subject: String
  body: String
  to: [ToEmailAddress]
  cc: [ToEmailAddress]
  bcc: [ToEmailAddress]
  attachments: [EmailAttachment]
  meta: Any
}

type LasecTransportationMode {
  id: String
  title: String
}

extend type Query {
  LasecTransportationModes: [LasecTransportationMode]
  LasecGetQuoteList(search: String): [Quote]
  LasecGetCRMQuoteList(
    search: String
    paging: PagingRequest
    filterBy: String
    filter: String
    periodStart: String
    periodEnd: String
    quoteDate: String
    orderBy: String
    orderDirection: String
    iter: Int
  ): PagedCRMQuote
  LasecGetCRMClientQuoteList(
    clientId: String
    search: String!
    paging: PagingRequest
    filter: String
    filterBy: String
    periodStart: String
    periodEnd: String
    quoteDate: String
    iter: Int
  ): PagedCRMQuote
  LasecGetDashboard(dashparams: LasecQuoteQueryInput): LasecQuoteDashboard
  LasecGetProductDashboard(
    dashparams: LasecQuoteQueryInput
  ): LasecProductDashboard

  LasecGetQuoteById(
    quote_id: String!
    option_id: String
    item_paging: PagingRequest
  ): Quote

  LasecGetQuoteComments(quote_id: String!): [LasecQuoteComment]

  LasecGetFilteredQuotes(filterparams: LasecFilteredQuoteQueryInput): [Quote]

  LasecGetCRMSalesOrders(productId: String, image: String, code:  String, description: String, unitOfMeasure: String, price: Int, paging: PagingRequest): PagedCRMSalesOrders
  LasecGetCRMPurchaseOrders(
    productId: String
    paging: PagingRequest
  ): PagedCRMPurchaseOrders
  LasecGetCRMPurchaseOrderDetail(orderId: String!): [PurchaseOrderItem]
  LasecGetCRMClientSalesOrders(
    clientId: String
    search: String!
    paging: PagingRequest
    filterBy: String
    filter: String
    periodStart: String
    periodEnd: String
    dateFilter: String
    iter: Int
  ): PagedCRMSalesOrders

  LasecGetSaleOrderDocument(ids: [String]): [SalesOrderDocuments]
  LasecGetSalesOrderDocumentBySlug(slug: String!): SalesOrderDocumentContent
  LasecGetPagedCRMSalesOrders(
    search: String
    paging: PagingRequest
    filterBy: String
    filter: String
    customer: [String]
    client: [String]
    orderStatus: String
    periodStart: String
    periodEnd: String
    dateFilter: String
    iter: Int
  ): PagedCRMSalesOrders

  LasecGetCRMClientInvoices(
    clientId: String
    salesTeamId: String
    search: String
    paging: PagingRequest
    filterBy: String
    filter: String
    periodStart: String
    periodEnd: String
    dateFilter: String
    iter: Int
  ): PagedCRMInvoices
  LasecGetCRMInvoices(
    search: String
    paging: PagingRequest
    filterBy: String
    filter: String
    periodStart: String
    periodEnd: String
    dateFilter: String
    iter: Int
  ): PagedCRMInvoices
  LasecGetCRMClientSalesHistory(
    clientId: String
    search: String
    paging: PagingRequest
    filterBy: String
    filter: String
    periodStart: String
    periodEnd: String
    iter: Int
  ): PagedCRMSalesHistory
  LasecGetCRMSalesHistory(
    clientId: String
    search: String
    paging: PagingRequest
    filterBy: String
    filter: String
    periodStart: String
    periodEnd: String
    year: Int
    month: Int
    years: [Any]
    iter: Int
  ): PagedCRMSalesHistory

  LasecGetCurrencies: [LasecCurrency]

  LasecGetFreightRequestQuoteDetail(quoteId: String!): FreightRequestQuoteDetail
  LasecGetCompanyDetailsforQuote(id: String!): LasecCRMCustomer

  # LasecGetSalesHistoryMonthTotals(search: String!, filterBy: String): [SalesHistoryMonthlyCount]
  LasecGetSalesHistoryMonthTotals(
    search: String!
    filterBy: String
  ): [SalesHistoryYearlyCount]
  LasecGetQuotePDFUrl(quote_id: String!): DocumentUrl
  LasecGetQuoteProformaPDFUrl(quote_id: String!): DocumentUrl

  LasecPrepareQuoteEmail(
    quote_id: String!
    email_type: String
  ): LasecPreparedEmail
}

extend type Mutation {
  LasecSetQuoteHeader(
    quote_id: String!
    input: LasecQuoteHeaderInput
  ): LasecQuoteHeader
  LasecUpdateQuoteStatus(
    quote_id: String!
    input: LasecQuoteStatusUpdate
  ): LasecQuoteStatusUpdateResult
  LasecCreateClientEnquiry(customerId: String!): LasecCustomerEnquiry
  SynchronizeNextActionsToOutloook(nextActions: Any!): OutlookSyncResponse
  LasecMarkNextActionAsActioned(id: String!): SimpleResponse
  LasecSendQuoteEmail(
    code: String!
    mailMessage: CreateEmailMessage!
  ): SimpleResponse
  LasecDeleteSaleOrderDocument(id: String): SimpleResponse

  LasecUploadSaleOrderDocument(
    createInput: SalesOrderContentInput!
  ): SalesOrderDocumentContent
  LasecCRMUpdateFreightRequestDetails(
    freightRequestDetailInput: FreightRequestDetailInput!
  ): SimpleResponse

  LasecCRMDuplicateQuoteForClient(
    quoteId: String!
    clientId: String!
  ): QuoteDuplicateResponse

  LasecCreateNewQuoteForClient(
    newQuoteInput: LasecNewQuoteInput
  ): LasecNewQuoteResponse
  LasecDuplicateQuoteOption(
    quote_id: String
    option_id: String
  ): LasecQuoteOption
  LasecQuoteCreateSectionHeader(
    quote_id: String
    header: String
  ): LasecQuoteHeader
  LasecQuoteUpdateSectionHeader(
    quote_id: String
    header_id: String
    header: String
  ): LasecQuoteHeader
  LasecQuoteDeleteSectionHeader(
    quote_id: String
    header_id: String
  ): SimpleResponse
  LasecQuoteAddProductToQuote(
    quote_id: String
    product_id: String
    option_id: String
  ): LasecQuoteItem
  LasecQuoteItemUpdate(
    quote_id: String
    quote_item_id: String
    quote_item_input: LasecQuoteItemInput
  ): LasecQuoteItem
  LasecQuoteDeleteQuoteItem(quote_item_id: String): SimpleResponse
  LasecSaveQuoteComment(
    quoteId: String!
    comment: String!
    commentId: String
  ): SimpleResponse

  LasecDeleteQuoteComment(commentId: String): SimpleResponse
  LasecUpdateQuote(
    item_id: String
    quote_type: String
    rep_code: String
    client_id: String
    valid_until: String
    currency_code: String
  ): SimpleResponse
  LasecUpdateQuoteLineItems(
    quote_id: String
    lineItemIds: [String]
    gp: Float
    mup: Float
    agentCom: Float
    freight: Float
  ): SimpleResponse

  LasecDeleteQuote(id: String): SimpleResponse

  LasecDeleteQuotes(quoteIds: [String]): SimpleResponse

  LasecCreateNewQuoteOption(
    quote_id: String!
    copy_from: String
  ): LasecQuoteOption

  LasecPatchQuoteOption(
    quote_id: String!
    option_id: String!
    option: LasecQuoteOptionPatchInput!
  ): LasecQuoteOption

  LasecDeleteQuoteOption(
    quote_id: String!
    option_id: String!
  ): CoreSimpleResponse
}
